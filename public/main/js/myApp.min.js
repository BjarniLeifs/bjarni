/*! Made on 30-12-2017 */

var app=angular.module("ramesApp",["ui.router","angular-growl"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","growlProvider",function(e,t,o,r,a){r.interceptors.push("authInterceptor"),a.globalTimeToLive(3e3),e.state("main",{url:"/main",templateUrl:"views/main.html",controller:"AuthCtrl"}).state("main.home",{url:"/",templateUrl:"views/home.html",controller:"HomeCtrl"}).state("main.about",{url:"/about",templateUrl:"views/about/about.html",controller:"AboutCtrl"}).state("main.about.picture",{url:"/picture",templateUrl:"views/ramesInfo/picture.html",controller:"AboutCtrl"}).state("main.about.roles",{url:"/info/roles",templateUrl:"views/ramesInfo/info.html",controller:"RamesRolesCtrl"}).state("main.about.activites",{url:"/info/activites",templateUrl:"views/ramesInfo/info.html",controller:"RamesActiviteCtrl"}).state("main.about.material",{url:"/info/material",templateUrl:"views/ramesInfo/info.html",controller:"RamesMaterialCtrl"}).state("main.about.environment",{url:"/info/environment",templateUrl:"views/ramesInfo/info.html",controller:"RamesEnvironmentCtrl"}).state("main.about.software",{url:"/info/software",templateUrl:"views/ramesInfo/info.html",controller:"RamesSoftwareCtrl"}).state("main.aboutcreator",{url:"/aboutcreator",templateUrl:"views/about/aboutcreator.html",controller:"AboutCreatorCtrl"}).state("main.dashboard",{url:"/dashboard",templateUrl:"views/dashboard/dashboard.html",controller:"DashboardCtrl"}).state("main.dashboard.overview",{url:"/overview",templateUrl:"views/dashboard/overview.html",controller:"ProjectCtrl"}).state("main.dashboard.newproject",{url:"/newproject",templateUrl:"views/dashboard/newproject.html",controller:"ProjectCtrl"}).state("main.dashboard.edit",{url:"/edit/project/:id",templateUrl:"views/dashboard/editproject.html",controller:"ProjectCtrl"}).state("main.dashboard.delete",{url:"/delete/project/:id",templateUrl:"views/dashboard/deleteproject.html",controller:"ProjectCtrl"}).state("main.project",{url:"/project/:id",templateUrl:"views/projectoverview/project.html",controller:"ProjectCtrl"}).state("main.project.overview",{url:"/overview",templateUrl:"views/projectoverview/overview.html",controller:"ReportCtrl"}).state("main.project.newreport",{url:"/newreport",templateUrl:"views/projectoverview/newreport.html",controller:"NewReportCtrl"}).state("main.project.deletereport",{url:"/delete/report/:reportid",templateUrl:"views/projectoverview/deletereport.html",controller:"DeleteReportCtrl"}).state("main.project.viewreport",{url:"/report/:reportid/view",templateUrl:"views/projectoverview/report.html",controller:"ViewReportCtrl"}).state("main.editreport",{url:"/edit/project/:id/report/:reportid",templateUrl:"views/projectoverview/editreport.html",controller:"EditReportCtrl"}).state("main.editreport.editroles",{url:"/roles",templateUrl:"views/projectoverview/editreportattribute.html",controller:"EditRolesCtrl"}).state("main.editreport.editactivity",{url:"/activities",templateUrl:"views/projectoverview/editreportattribute.html",controller:"EditActivityCtrl"}).state("main.editreport.editmaterial",{url:"/material",templateUrl:"views/projectoverview/editreportattribute.html",controller:"EditMaterialCtrl"}).state("main.editreport.editenvironment",{url:"/environment",templateUrl:"views/projectoverview/editreportattribute.html",controller:"EditEnvironmentCtrl"}).state("main.editreport.editsoftware",{url:"/software",templateUrl:"views/projectoverview/editreportattribute.html",controller:"EditSoftwareCtrl"}).state("main.editfeedbackreport",{url:"/feedback/project/:id/report/:reportid",templateUrl:"views/feedback/feedbackoverview.html",controller:"EditFeedbackReportCtrl"}).state("main.editfeedbackreport.feedbackroles",{url:"/roles",templateUrl:"views/feedback/editfeedbackreport.html",controller:"EditFeedbackRolesCtrl"}).state("main.editfeedbackreport.feedbackactivity",{url:"/activities",templateUrl:"views/feedback/editfeedbackreport.html",controller:"EditFeedbackActivityCtrl"}).state("main.editfeedbackreport.feedbackmaterial",{url:"/material",templateUrl:"views/feedback/editfeedbackreport.html",controller:"EditFeedbackMaterialCtrl"}).state("main.editfeedbackreport.feedbackenvironment",{url:"/environment",templateUrl:"views/feedback/editfeedbackreport.html",controller:"EditFeedbackEnvironmentCtrl"}).state("main.editfeedbackreport.feedbacksoftware",{url:"/software",templateUrl:"views/feedback/editfeedbackreport.html",controller:"EditFeedbackSoftwareCtrl"}).state("main.editfeedbackreport.feedbackview",{url:"/view",templateUrl:"views/feedback/feedbackreportview.html",controller:"FeedbackViewCtrl"}).state("main.contactus",{url:"/contactus",templateUrl:"views/contact/contactus.html",controller:"ContractUsCtrl"}).state("main.login",{url:"/login",templateUrl:"views/authentication/login.html",controller:"AuthCtrl",onEnter:["$state","authFactory",function(e,t){t.isLoggedIn()&&e.go("main")}]}).state("main.register",{url:"/register",templateUrl:"views/authentication/register.html",controller:"AuthCtrl"}).state("main.error",{url:"/notfound",templateUrl:"views/error.html",controller:"ErrorCtrl"}).state("main.management",{url:"/management",templateUrl:"views/management/index.html",controller:"ManagementCtrl"}).state("main.management.reporttype",{url:"/reporttype",templateUrl:"views/management/reporttype/overview.html",controller:"ReportTypeCtrl"}).state("main.management.newreportype",{url:"/newreporttype",templateUrl:"views/management/reporttype/newreporttype.html",controller:"ReportTypeCtrl"}).state("main.management.editreporttype",{url:"/edit/reporttype/:id",templateUrl:"views/management/reporttype/editreporttype.html",controller:"ReportTypeCtrl"}).state("main.management.deletereporttype",{url:"/delete/reporttype/:id",templateUrl:"views/management/reporttype/deletereporttype.html",controller:"ReportTypeCtrl"}),t.otherwise("main")}]),app.controller("AboutCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","categoryFactory",function(e,t,o,r,a,n,c){a(function(){e.categories=c.getCategoryOrdSeq()},200),a(function(){e.ramesinfo=n.getRamesInfo()},200)}]),app.controller("AboutCreatorCtrl",["$scope","$state","$stateParams","$location","$timeout",function(e,t,o,r,a){}]),app.controller("AuthCtrl",["$scope","$state","$stateParams","$location","$timeout","authFactory","growl",function(e,t,o,r,a,n,c){e.newUser={},e.loginUser={},e.isLoggedIn=n.isLoggedIn(),e.currentName=n.currentName(),e.isLoggedIn=n.isLoggedIn(),e.register=function(){var o={};if(""==e.newUser.username||""==e.newUser.firstName||""==e.newUser.lastName||""==e.newUser.email)c.warning("Please fill out all fields.",o);else if(e.password===e.confirmPassword){var r={username:e.newUser.username,password:e.newUser.password,confirmPassword:e.newUser.confirmPassword,name:e.newUser.firstName+" "+e.newUser.lastName,email:e.newUser.email};n.register(r).then(function(e){200==e.status&&(c.success("Successfully registered.",o),t.go("main",{},{reload:!0}))},function(e){409==e.status&&c.warning("Username already exists.",o),401==e.status?c.warning("Please fill out all information",o):400==e.status&&c.error("Something went wrong.",o)})}else c.warning("The passwords did not match!",o);e.newUser={}},e.login=function(){var o={};if(e.loginUser.username&&e.loginUser.password){var r={username:e.loginUser.username,password:e.loginUser.password};n.logIn(r).then(function(e){200==e.status&&(console.log(e.data.token),n.saveToken(e.data.token),c.success("Successfully loged in.",o))},function(e){404==e.status?c.warning("No such user found.",o):401==e.status?c.warning("Inncorrect password.",o):c.error("Something went wrong.",o)}),a(function(){e.isLoggedIn=n.isLoggedIn()},130),a(function(){t.go("main",{},{reload:!0})},350),e.loginUser={}}else c.warning("You need to provide username and login!",o)},e.logout=function(){n.logOut(),e.isLoggedIn=n.isLoggedIn(),t.go("main")}}]),app.controller("CategoryCtrl",["$scope","$state","$stateParams","$location","$timeout",function(e,t,o,r,a){}]),app.controller("ContractUsCtrl",["$scope","$state","$stateParams","$location","$timeout",function(e,t,o,r,a){e.Title={ContactUs:"Contact us",ContactUsSmall:"Feel free to contact us"},e.Company={Title:"Our office",Name:"Reykjavik University.",Department:"School of Computer Science",Address:"Menntavegur 1, 101 Reykjavík, Iceland",Phone:{Name:"Tel:",Number:"+354-5996200"},Contact:{Name:"Dr. Marta Kristín Lárusdóttir",Email:"marta@ru.is"}},e.ContactForm={Name:{Name:"Name",Explanation:"Enter name"},Email:{Email:"Email Address",Explanation:"Enter email"},Subject:{Subject:"Subject",Choose:{Opt1:"Choose One:",Opt2:"General Service",Opt3:"Suggestions",Opt4:"Product Support"}},Message:{Message:"Message",Explanation:"Message"},Buttom:"Send Message"}}]),app.controller("DashboardCtrl",["$scope","$state","$stateParams","$location","$timeout",function(e,t,o,r,a){}]),app.controller("DeleteReportCtrl",["$scope","$state","$stateParams","$location","$timeout","reportTypeFactory","reportFactory","growl",function(e,t,o,r,a,n,c,i){a(function(){void 0!=o.id&&(e.projectId=o.id),void 0!=o.reportid&&(e.report=c.getById(o.reportid)),e.reportypes=n.getAll()},110),e.deleteReport=function(){var e={};c.delete(o.reportid).then(function(r){200==r.status?(i.success("Successfully deleted plan.",e),t.go("main.project.overview",{id:o.id})):i.warning("Something went wrong.",e)},function(t){404==t.status&&i.error("Something went wrong.",e)})}}]),app.controller("EditActivityCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Save & Next",e.buttonSave="Save Information",a(function(){e.ramesInfo=c.getByCategoryId(2),e.answers=u.getByCategoryIdAndReportId(2,o.reportid),e.questions=i.getQuestionsByCategoryId(2),e.category=l.getCategorybyID(2),e.dropdown=s.getDrowpdown(),e.checkbox=s.getCheckbox(),e.radio=s.getRadio(),e.isCollapsed=!1},100),e.saveInfo=function(o){var r={},a=!1;console.log(o),angular.forEach(e.answers,function(e,t){u.post(e).then(function(e){200!=e.status&&(a=!0)})}),a?p.error("Something went wrong, please try again later.",r):"next"===o?t.go("main.editreport.editmaterial"):p.success("Information successfully saved.",r)}}]),app.controller("EditEnvironmentCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Save & Next",e.buttonSave="Save Information",a(function(){e.ramesInfo=c.getByCategoryId(4),e.answers=u.getByCategoryIdAndReportId(4,o.reportid),e.questions=i.getQuestionsByCategoryId(4),e.category=l.getCategorybyID(4),e.dropdown=s.getDrowpdown(),e.checkbox=s.getCheckbox(),e.radio=s.getRadio()},100),e.saveInfo=function(o){var r={},a=!1;angular.forEach(e.answers,function(e,t){u.post(e).then(function(e){200!=e.status&&(a=!0)})}),a?p.error("Something went wrong, please try again later.",r):"next"===o?t.go("main.editreport.editsoftware"):p.success("Information successfully saved.",r)}}]),app.controller("EditFeedbackActivityCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Save & next",e.buttonSave="Save Information",a(function(){e.answers=u.getFeedbackByCategoryIdAndReportId(2,o.reportid),e.questions=i.getFeedbackQuestionsByCategoryId(2),e.category=l.getCategorybyID(2),e.checkbox=s.getFeedbackCheckbox(),e.radio=s.getFeedbackRadio()},100),e.saveInfo=function(r){var a={},n=!1;angular.forEach(e.answers,function(e,t){u.postFeedback(e).then(function(e){200!=e.status&&(n=!0)})}),n?p.error("Something went wrong, please try again later.",a):"next"===r?(p.success("Information successfully saved.",a),t.go("main.editfeedbackreport.feedbackmaterial",{id:o.id})):p.success("Information successfully saved.",a)}}]),app.controller("EditFeedbackEnvironmentCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Save & next",e.buttonSave="Save Information",a(function(){e.answers=u.getFeedbackByCategoryIdAndReportId(4,o.reportid),e.questions=i.getFeedbackQuestionsByCategoryId(4),e.category=l.getCategorybyID(4),e.checkbox=s.getFeedbackCheckbox(),e.radio=s.getFeedbackRadio()},100),e.saveInfo=function(r){var a={},n=!1;angular.forEach(e.answers,function(e,t){u.postFeedback(e).then(function(e){200!=e.status&&(n=!0)})}),n?p.error("Something went wrong, please try again later.",a):"next"===r?(p.success("Information successfully saved.",a),t.go("main.editfeedbackreport.feedbacksoftware",{id:o.id})):p.success("Information successfully saved.",a)}}]),app.controller("EditFeedbackMaterialCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Save & next",e.buttonSave="Save Information",a(function(){e.answers=u.getFeedbackByCategoryIdAndReportId(3,o.reportid),e.questions=i.getFeedbackQuestionsByCategoryId(3),e.category=l.getCategorybyID(3),e.checkbox=s.getFeedbackCheckbox(),e.radio=s.getFeedbackRadio()},100),e.saveInfo=function(r){var a={},n=!1;angular.forEach(e.answers,function(e,t){u.postFeedback(e).then(function(e){200!=e.status&&(n=!0)})}),n?p.error("Something went wrong, please try again later.",a):"next"===r?(p.success("Information successfully saved.",a),t.go("main.editfeedbackreport.feedbackenvironment",{id:o.id})):p.success("Information successfully saved.",a)}}]),app.controller("EditFeedbackReportCtrl",["$scope","$state","$stateParams","$location","$timeout","questionFactory","categoryFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory",function(e,t,o,r,a,n,c,i,n,s,c,l){a(function(){void 0!=o.id&&(e.projectId=o.id),void 0!=o.reportid&&(e.reportId=o.reportid)},110)}]),app.controller("EditFeedbackRolesCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Save & Next",e.buttonSave="Save Information",a(function(){e.answers=u.getFeedbackByCategoryIdAndReportId(1,o.reportid),e.questions=i.getFeedbackQuestionsByCategoryId(1),e.category=l.getCategorybyID(1),e.checkbox=s.getFeedbackCheckbox(),e.radio=s.getFeedbackRadio()},100),e.saveInfo=function(r){var a={},n=!1;angular.forEach(e.answers,function(e,t){u.postFeedback(e).then(function(e){200!=e.status&&(n=!0)})}),n?p.error("Something went wrong, please try again later.",a):"next"===r?(p.success("Information successfully saved.",a),t.go("main.editfeedbackreport.feedbackactivity",{id:o.id})):p.success("Information successfully saved.",a)}}]),app.controller("EditFeedbackSoftwareCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Finish",e.buttonSave="Save Information",a(function(){e.answers=u.getFeedbackByCategoryIdAndReportId(5,o.reportid),e.questions=i.getFeedbackQuestionsByCategoryId(5),e.category=l.getCategorybyID(5),e.checkbox=s.getFeedbackCheckbox(),e.radio=s.getFeedbackRadio()},100),e.saveInfo=function(r){var a={},n=!1;angular.forEach(e.answers,function(e,t){u.postFeedback(e).then(function(e){200!=e.status&&(n=!0)})}),n?p.error("Something went wrong, please try again later.",a):"next"===r?(p.success("Information successfully saved.",a),t.go("main.project.overview",{id:o.id})):p.success("Information successfully saved.",a)}}]),app.controller("EditMaterialCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Save & Next",e.buttonSave="Save Information",a(function(){e.ramesInfo=c.getByCategoryId(3),e.answers=u.getByCategoryIdAndReportId(3,o.reportid),e.questions=i.getQuestionsByCategoryId(3),e.category=l.getCategorybyID(3),e.dropdown=s.getDrowpdown(),e.checkbox=s.getCheckbox(),e.radio=s.getRadio()},100),e.saveInfo=function(o){var r={},a=!1;angular.forEach(e.answers,function(e,t){u.post(e).then(function(e){200!=e.status&&(a=!0)})}),a?p.error("Something went wrong, please try again later.",r):"next"===o?t.go("main.editreport.editenvironment"):p.success("Information successfully saved.",r)}}]),app.controller("EditReportCtrl",["$scope","$state","$stateParams","$location","$timeout","questionFactory","categoryFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory",function(e,t,o,r,a,n,c,i,n,s,c,l){a(function(){void 0!=o.id&&(e.projectId=o.id),void 0!=o.reportid&&(e.reportId=o.reportid)},110),e.saveInfo=function(r){var a={},n=!1;angular.forEach(e.answers,function(e,t){l.post(e).then(function(e){200!=e.status&&(n=!0)})}),n?growl.error("Something went wrong, please try again later.",a):"next"===r?(growl.success("Information successfully saved.",a),t.go("main.project.overview",{id:o.id})):"Roles"===r?t.go("main.editreport.editroles"):"Activities"===r?t.go("main.editreport.editactivity"):"Material"===r?t.go("main.editreport.editmaterial"):"Environment"===r?t.go("main.editreport.editenvironment"):"Software"===r?t.go("main.editreport.editsoftware"):"Project"===r?t.go("main.project.overview",{id:o.id}):growl.success("Information successfully saved.",a)}}]),app.controller("EditRolesCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Save & Next",e.buttonSave="Save Information",a(function(){e.ramesInfo=c.getByCategoryId(1),e.answers=u.getByCategoryIdAndReportId(1,o.reportid),e.questions=i.getQuestionsByCategoryId(1),e.category=l.getCategorybyID(1),e.dropdown=s.getDrowpdown(),e.checkbox=s.getCheckbox(),e.radio=s.getRadio()},100),e.saveInfo=function(o){var r={},a=!1;angular.forEach(e.answers,function(e,t){u.post(e).then(function(e){200!=e.status&&(a=!0)})}),a?p.error("Something went wrong, please try again later.",r):"next"===o?t.go("main.editreport.editactivity"):p.success("Information successfully saved.",r)}}]),app.controller("EditSoftwareCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory","growl",function(e,t,o,r,a,n,c,i,s,l,u,p){e.buttonNext="Finish",e.buttonSave="Save Information",a(function(){e.ramesInfo=c.getByCategoryId(5),e.answers=u.getByCategoryIdAndReportId(5,o.reportid),e.questions=i.getQuestionsByCategoryId(5),e.category=l.getCategorybyID(5),e.dropdown=s.getDrowpdown(),e.checkbox=s.getCheckbox(),e.radio=s.getRadio()},100),e.saveInfo=function(r){var a={},n=!1;angular.forEach(e.answers,function(e,t){u.post(e).then(function(e){200!=e.status&&(n=!0)})}),n?p.error("Something went wrong, please try again later.",a):"next"===r?(p.success("Information successfully saved.",a),t.go("main.project.overview",{id:o.id})):p.success("Information successfully saved.",a)}}]),app.controller("ErrorCtrl",["$scope","$state","$stateParams","$location","$timeout",function(e,t,o,r,a){}]),app.controller("FeedbackViewCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory",function(e,t,o,r,a,n,c,i,s,l,u){e.answers=u.getByFeedbackReportId(o.reportid),e.questions=i.getFeedbackQuestions(),a(function(){e.viewReport=[],angular.forEach(e.questions,function(t,o){var r="";angular.forEach(e.answers,function(e,o){t.ID==e.QuestionID&&(e.Answer.number?r+=""==r?e.Answer.number:" ,"+e.Answer.number:e.Answer.Text?(e.Answer.Text.conditionalyesnotext?r+=e.Answer.Text.conditionalyesnotext:r+=""==r?e.Answer.Text:" ,"+e.Answer.Text,e.Answer.Textbox&&(e.Answer.Textbox.conditionalyesnotext?r+=e.Answer.Textbox.conditionalyesnotext:r+=""==r?e.Answer.Textbox:", "+e.Answer.Textbox)):e.Answer.checkbox?e.Answer.checkbox.data&&(angular.forEach(e.Answer.checkbox.data,function(e,t){r+=""==r?e:", "+e}),e.Answer.checkbox.Text&&(r+=""==r?e.Answer.checkbox.Text:", "+e.Answer.checkbox.Text)):e.Answer.text?r+=""==r?e.Answer.text:", "+e.Answer.text:e.Answer.radio?r+=""==r?e.Answer.radio:", "+e.Answer.radio:e.Answer.yesno?r+=""==r?e.Answer.yesno:", "+e.Answer.yesno:e.Answer.conditionalyesnotext&&(r+=""==r?e.Answer.conditionalyesnotext:", "+e.Answer.conditionalyesnotext))});var a={id:t.ID,Question:t.Question,Answer:r};e.viewReport.push(a),r=""})},150)}]),app.controller("ManagementCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory",function(e,t,o,r,a,n){a(function(){e.infos=n.getRamesInfoByCategoryId(2)},200)}]),app.controller("NewReportCtrl",["$scope","$state","$stateParams","$location","$timeout","reportTypeFactory","reportFactory","growl",function(e,t,o,r,a,n,c,i){a(function(){void 0!=o.id&&(e.projectId=o.id),e.reportypes=n.getAll()},110),e.data={typeSelect:null,multipleSelect:[],option1:"option-1"},e.makeNewReport=function(){var r={},a={Name:e.reportName,ReportTypeID:e.data.typeSelect,ProjectID:o.id};c.add(a).then(function(e){200==e.status&&(i.success("Successfully created plan.",r),t.go("main.editreport.editroles",{reportid:e.data[0].ID,id:o.id}))},function(e){412==e.status&&i.error("Something went wrong.",r)})}}]),app.controller("ProjectCtrl",["$scope","$state","$stateParams","$location","$timeout","projectFactory","growl",function(e,t,o,r,a,n,c){a(function(){e.projects=n.getProjectByUserId(),void 0!=o.id&&(e.projectUpdate=n.getProjectById(o.id),e.projectId=o.id)},110),e.makeNewProject=function(){var o={};n.createProject(e.project).then(function(e){200==e.status&&(c.success("Project successfully created.",o),t.go("main.dashboard.overview"))},function(e){400==e.status&&c.error("Something went wrong.",o)})},e.updateProject=function(){var o={};n.updateProject(e.projectUpdate[0]).then(function(e){200==e.status&&(c.success("Project updated.",o),t.go("main.dashboard.overview"))},function(e){400==e.status&&c.error("Something went wrong.",o)})},e.deleteProject=function(){var e={};n.deleteProject(o.id).then(function(o){200==o.status&&(c.success("Successfully deleted project",e),t.go("main.dashboard.overview"))},function(t){403==t.status?c.warning("This project is not yours.",e):c.error("Something went wrong.",e)})}}]),app.controller("RamesActiviteCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory",function(e,t,o,r,a,n){a(function(){e.infos=n.getRamesInfoByCategoryId(2)},200)}]),app.controller("RamesEnvironmentCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory",function(e,t,o,r,a,n){a(function(){e.infos=n.getRamesInfoByCategoryId(4)},200)}]),app.controller("RamesMaterialCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory",function(e,t,o,r,a,n){a(function(){e.infos=n.getRamesInfoByCategoryId(3)},200)}]),app.controller("RamesRolesCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory",function(e,t,o,r,a,n){a(function(){e.infos=n.getRamesInfoByCategoryId(1)},200)}]),app.controller("RamesSoftwareCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory",function(e,t,o,r,a,n){a(function(){e.infos=n.getRamesInfoByCategoryId(5)},200)}]),app.controller("ReportCtrl",["$scope","$state","$stateParams","$location","$timeout","reportTypeFactory","reportFactory",function(e,t,o,r,a,n,c){a(function(){console.log(o.id),e.projectid=o.id,e.reports=c.getReportByProjectId(o.id),e.feedbackreports=c.getFeedbackReportByProjectId(o.id),e.reportypes=n.getAll()},110)}]),app.controller("ReportTypeCtrl",["$scope","$state","$stateParams","$location","$timeout","reportTypeFactory",function(e,t,o,r,a,n){a(function(){e.reporttypes=n.getAll(),void 0!=o.id&&(e.reporttype=n.getById(o.id))},200),e.makeNewType=function(){n.add(e.type),a(function(){t.go("main.management.reporttype")},110)},e.updateReportType=function(){n.update(e.reporttype[0]),a(function(){t.go("main.management.reporttype")},110)},e.deleteReporttype=function(){n.delete(o.id),a(function(){t.go("main.management.reporttype")},110)}}]),app.controller("ViewReportCtrl",["$scope","$state","$stateParams","$location","$timeout","aboutFactory","ramesInfoFactory","questionFactory","choicesFactory","categoryFactory","reportInfoFactory",function(e,t,o,r,a,n,c,i,s,l,u){e.ramesInfo=c.getAll(),e.answers=u.getByReportId(o.reportid),e.questions=i.getAll(1),e.category=l.getCategoryOrdSeq(1),e.dropdown=s.getDrowpdown(),e.checkbox=s.getCheckbox(),e.radio=s.getRadio(),a(function(){e.viewReport=[],angular.forEach(e.category,function(t,o){var r={Category:t.Category,Info:[]};angular.forEach(e.ramesInfo,function(o,a){if(o.CategoryID==t.ID){var n="";angular.forEach(e.questions,function(t,r){o.ID==t.RamesInfoID&&angular.forEach(e.answers,function(e,o){e.QuestionID==t.ID&&(e.Answer.number?n+=""==n?e.Answer.number:" ,"+e.Answer.number:e.Answer.Text?(e.Answer.Text.conditionalyesnotext?n+=e.Answer.Text.conditionalyesnotext:n+=""==n?e.Answer.Text:" ,"+e.Answer.Text,e.Answer.Textbox&&(e.Answer.Textbox.conditionalyesnotext?n+=e.Answer.Textbox.conditionalyesnotext:n+=""==n?e.Answer.Textbox:", "+e.Answer.Textbox)):e.Answer.checkbox?e.Answer.checkbox.data&&(angular.forEach(e.Answer.checkbox.data,function(e,t){n+=""==n?e:", "+e}),e.Answer.checkbox.Text&&(n+=""==n?e.Answer.checkbox.Text:", "+e.Answer.checkbox.Text)):e.Answer.text?n+=""==n?e.Answer.text:", "+e.Answer.text:e.Answer.radio?n+=""==n?e.Answer.radio:", "+e.Answer.radio:e.Answer.yesno?n+=""==n?e.Answer.yesno:", "+e.Answer.yesno:e.Answer.conditionalyesnotext&&(n+=""==n?e.Answer.conditionalyesnotext:", "+e.Answer.conditionalyesnotext))})}),r.Info.push({Name:o.Name,Value:n}),n=""}}),e.viewReport.push(r),r=[]})},150)}]),app.factory("aboutFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getRamesInfo=function(){var t=[];return e.get(a+"/api/ramesinfo").success(function(e){angular.copy(e,t)}),t},r.getRamesInfoByCategoryId=function(t){var o=[];return e.get(a+"/api/ramesinfo/category/"+t).success(function(e){angular.copy(e,o)}),o},r}]),app.factory("authFactory",["$http","$window","$location","configFactory","growl",function(e,t,o,r,a){var n={},c=r.getHttpUrl();return n.saveToken=function(e){t.localStorage.appToken=e},n.getToken=function(){return t.localStorage.appToken},n.isLoggedIn=function(){var e=n.getToken();if(e){return JSON.parse(t.atob(e.split(".")[1])).exp>Date.now()/1e3}return!1},n.isAdmin=function(){for(var e=n.getToken(),o=JSON.parse(t.atob(e.split(".")[1])).scopes,r=0;r<o.length;r++)if("admin"===o[r])return!0;return!1},n.currentUser=function(){if(n.isLoggedIn()){var e=n.getToken();return JSON.parse(t.atob(e.split(".")[1])).username}},n.currentUserId=function(){if(n.isLoggedIn()){var e=n.getToken();return JSON.parse(t.atob(e.split(".")[1])).id}},n.currentName=function(){if(n.isLoggedIn()){var e=n.getToken();return JSON.parse(t.atob(e.split(".")[1])).name}},n.register=function(t){return e.post(c+"/auth/register",t)},n.logIn=function(t){t=e.post(c+"/auth/login",t);return console.log(t),t},n.logOut=function(){t.localStorage.removeItem("appToken"),o.path("/main")},n}]),app.factory("authInterceptor",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},o.localStorage.appToken&&(e.headers.Authorization="Bearer "+o.localStorage.appToken),e},response:function(e){return e.status,e||t.when(e)}}}),app.factory("choicesFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getRadio=function(){var t=[];return e.get(a+"/api/questionradiochoices").success(function(e){angular.copy(e,t)}),t},r.getFeedbackRadio=function(){var t=[];return e.get(a+"/api/feedback/questionradiochoices").success(function(e){angular.copy(e,t)}),t},r.getDrowpdown=function(){var t=[];return e.get(a+"/api/questiondropdownchoices").success(function(e){angular.copy(e,t)}),t},r.getCheckbox=function(){var t=[];return e.get(a+"/api/questioncheckboxchoices").success(function(e){angular.copy(e,t)}),t},r.getFeedbackCheckbox=function(){var t=[];return e.get(a+"/api/feedback/questioncheckboxchoices").success(function(e){angular.copy(e,t)}),t},r}]),app.factory("configFactory",["$http","$window",function(e,t){var o={};return o.getHttpUrl=function(){return"http://localhost:3001"},o}]),app.factory("projectFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getProjectByUserId=function(){var t=[];return e.get(a+"/api/project/").success(function(e){angular.copy(e,t)}),t},r.getProjectById=function(t){var o=[];return e.get(a+"/api/project/"+t).success(function(e){angular.copy(e,o)}),o},r.createProject=function(t){return e.post(a+"/api/project",t)},r.updateProject=function(t){return e.put(a+"/api/project",t)},r.deleteProject=function(t){return e.delete(a+"/api/project/"+t)},r}]),app.factory("categoryFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getCategoryOrdSeq=function(){var t=[];return e.get(a+"/api/ramescategory/ordered/sequenceNumber").success(function(e){angular.copy(e,t)}),t},r.getCategorybyID=function(t){var o=[];return e.get(a+"/api/ramescategory/"+t).success(function(e){angular.copy(e,o)}),o},r}]),app.factory("ramesInfoFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getAll=function(){var t=[];return e.get(a+"/api/ramesinfo").success(function(e){angular.copy(e,t)}),t},r.getByCategoryId=function(t){var o=[];return e.get(a+"/api/ramesinfo/category/"+t).success(function(e){angular.copy(e,o)}),o},r}]),app.factory("questionFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getAll=function(){var t=[];return e.get(a+"/api/ramesquestion/").success(function(e){angular.copy(e,t)}),t},r.getQuestionsByCategoryId=function(t){var o=[];return e.get(a+"/api/ramesquestion/category/"+t).success(function(e){angular.copy(e,o)}),o},r.getFeedbackQuestionsByCategoryId=function(t){var o=[];return e.get(a+"/api/feedback/ramesquestion/category/"+t).success(function(e){angular.copy(e,o)}),o},r.getFeedbackQuestions=function(){var t=[];return e.get(a+"/api/feedback/ramesquestion").success(function(e){angular.copy(e,t)}),t},r}]),app.factory("reportFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getReportByProjectId=function(t){var o=[];return e.get(a+"/api/reports/project/"+t).success(function(e){angular.copy(e,o)}),o},r.getFeedbackReportByProjectId=function(t){var o=[];return e.get(a+"/api/reports/project/"+t).success(function(e){angular.copy(e,o)}),o},r.getById=function(t){var o=[];return e.get(a+"/api/reports/"+t).success(function(e){angular.copy(e,o)}),o},r.add=function(t){return e.post(a+"/api/reports",t)},r.update=function(t){e.put(a+"/api/reports/",t).success(function(e){angular.copy(e,void 0)})},r.delete=function(t){return e.delete(a+"/api/reports/"+t)},r}]),app.factory("reportInfoFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getByReportId=function(t){var o=[];return e.get(a+"/api/reportsinfo/report/"+t).success(function(e){angular.copy(e,o),console.log(e)}),o},r.getByCategoryIdAndReportId=function(t,o){var r=[];return e.get(a+"/api/reportsinfo/category/"+t+"/report/"+o).success(function(e){angular.copy(e,r)}),r},r.getFeedbackByCategoryIdAndReportId=function(t,o){var r=[];return e.get(a+"/api/feedback/reportsinfo/category/"+t+"/report/"+o).success(function(e){angular.copy(e,r)}),r},r.getByFeedbackReportId=function(t){var o=[];return e.get(a+"/api/feedback/reportsinfo/report/"+t).success(function(e){angular.copy(e,o)}),o},r.post=function(t){return e.put(a+"/api/reportsinfo",t)},r.postFeedback=function(t){return e.put(a+"/api/feedback/reportsinfo",t)},r}]),app.factory("reportTypeFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getAll=function(){var t=[];return e.get(a+"/api/reporttype").success(function(e){angular.copy(e,t)}),t},r.getById=function(t){var o=[];return e.get(a+"/api/reporttype/"+t).success(function(e){angular.copy(e,o)}),o},r.add=function(t){e.post(a+"/api/reporttype",t).success(function(e){angular.copy(e,void 0)})},r.update=function(t){e.put(a+"/api/reporttype/",t).success(function(e){angular.copy(e,void 0)})},r.delete=function(t){e.delete(a+"/api/reporttype/"+t).success(function(e){angular.copy(e,void 0)})},r}]),app.factory("userFactory",["$http","$window","configFactory",function(e,t,o){var r={},a=o.getHttpUrl();return r.getUserById=function(t){var o=[];return e.get(a+"/api/ramescategory/ordered/sequenceNumber").success(function(e){angular.copy(e,o)}),o},r}]);